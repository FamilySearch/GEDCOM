# Releasing a new version of the GEDCOM specification

These steps can only be followed by someone with commit access to both https://github.com/FamilySearch/GEDCOM and https://github.com/FamilySearch/GEDCOM.io

1. Make a new-version branch of the GEDCOM.io and GEDCOM repositories
    1. If needed, `git clone` the repositories locally
    1. `cd` into the root of the repo and run
        1. `git switch main`
        1. `git pull`
        1. `git switch -c new-version`
1. In the (new-version branch of) the GEDCOM repository:
    1. Update `changelog.md`
    1. Replace the version number in `specification/gedcom-0-introduction.md`
    1. If this is the first release of the calendar year, change the end range of the copyright notices in 
        - `NOTICE`
        - `LICENSE` (which quotes NOTICE near the end)
        - `specification/gedcom-0-introduction.md` (two instances, both in the YAML frontmatter)
    1. `git commit -p` (this will update the git log which is used to add the date to the rendered specification).
    1. `git push --set-upstream origin new-version`
    1. Visit the web interface and 
    1. In the `build/` directory,
        1. run `make`
        1. run `python3 push_to_gedcomio.py ../../GEDCOM.io`
1. In the (new-version branch of the) GEDCOM.io repository:
    1. `git commit -p` (or `git add` all the relevant files and then `git commit`)
    1. `git push --set-upstream origin new-version`
1. On both the GEDCOM and GEDCOM.io github web interfaces, convert the recent branch pushes into pull requests against `main`
1. Approve and merge the pull requests in a steering committee meeting
1. On both the GEDCOM  github web interface,
    1. View the releases
    1. Click the "Draft a new release" button
    1. In the "Chose a tag" dropdown, create a new tag with a lower-case `v` followed by the full version number (e.g. `v7.0.16`)
    1. Make the release title `Version` followed by the full version number (e.g. `Version 7.0.16`)
    1. Copy the part of the changelog that refers to this release int othe description box
    1. Attach some of the files generated by the `make` step earlier:
        - `specification/gedcom.pdf`
        - `specification/gedcom.html`
        - All of the regular files in the `extracted-files/` directory except for `README.md`
    1. Publish the release

